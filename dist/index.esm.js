import e,{useState as n,useEffect as t,useRef as r}from"react";import a from"lodash";function i(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,i=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(l)throw a}}return i}(e,n)||l(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,n){if(e){if("string"==typeof e)return s(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,n):void 0}}function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var u=[],c=[];!function(e,n){if(e&&"undefined"!=typeof document){var t,r=!0===n.prepend?"prepend":"append",a=!0===n.singleTag,i="string"==typeof n.container?document.querySelector(n.container):document.getElementsByTagName("head")[0];if(a){var o=u.indexOf(i);-1===o&&(o=u.push(i)-1,c[o]={}),t=c[o]&&c[o][r]?c[o][r]:c[o][r]=l()}else t=l();65279===e.charCodeAt(0)&&(e=e.substring(1)),t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(document.createTextNode(e))}function l(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),n.attributes)for(var t=Object.keys(n.attributes),a=0;a<t.length;a++)e.setAttribute(t[a],n.attributes[t[a]]);var o="prepend"===r?"afterbegin":"beforeend";return i.insertAdjacentElement(o,e),e}}('.rrms {\n  position:relative;\n  font-size: 1em;\n}\n.rrms-field {\n  display: table;\n  width:100%;\n  border: 1px solid #a3a3a3;\n  min-height: 44px\n}\n.rrms-field > div {\n  display: table-cell;\n  vertical-align: middle;\n  padding: 5px 10px;\n  cursor: pointer;\n}\n.rrms-value > span {\n  display: inline-block;\n  background: linear-gradient(45deg, #6a7d5e, #3f6f26);\n  padding: 2px 5px;\n  margin: 2px;\n  border-radius: 2px;\n  color: #fff;\n}\n.rrms-icons {\n  text-align: right;\n  width: 15px;\n}\nul.rrms-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  max-height:300px;\n  overflow: auto\n}\nul.rrms-list li {\n  cursor: pointer;\n  padding: 5px 10px;\n  border-bottom: 1px solid rgb(0 0 0 / 10%)\n}\nul.rrms-list li > div {\n  position: relative;\n  padding-left: 1.4em;\n}\nul.rrms-list li > div::before {\n  content: "";\n  width: 0.73em;\n  height: 0.73em;\n  border: 1px solid;\n  position: absolute;\n  top: 0.125em;\n  left: 0;\n  font-size: 1.1em;\n  border-radius: 2px;\n}\nul.rrms-list li.a {\n  background: linear-gradient(45deg, #6a7d5e, #3f6f26);\n  color: #fff\n}\nul.rrms-list li.a:hover {\n  background: linear-gradient(45deg, #3f6f26, #6a7d5e);\n  color: #ffffff;\n}\nul.rrms-list li:hover {\n  background: linear-gradient(45deg, #eeeeee, #aebda4)\n}\nul.rrms-list li.a > div::before {\n  background: #3e5731;\n  border-color: #123102;\n}\nul.rrms-list li.a > div::after {\n  content: "✓";\n  top: 0.02em;\n  left: 0.07em;\n  position: absolute;\n  color: #fff;\n  width: 0.73em;\n  height: 0.73em;\n  transform: scale(0.75);\n}\n.rrms-input {\n  position:absolute;\n  width:100%;\n  top:0;\n  left:0;\n  border:1px solid #a3a3a3;\n  background: #eee;\n  box-shadow: 0 5px 20px -5px rgba(0,0,0,0.3);\n  overflow:auto;\n  z-index:9;\n}\n.rrms-input > input, .rrms-input > input:focus {\n  padding: 5px 10px;\n  width:100%;\n  height: 30px;\n  box-shadow: inset 0 0 10px rgb(0,0,0,0.25);\n  border: 2px solid #4e9428;\n  outline: none;\n}\n.rrms-caret {\n  display: inline-block;\n  width: 0;\n  height: 0;\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-top: 6px solid #a4a4a4;\n  top: -2px;\n  position: relative;\n}\n',{});var d=function(l){var s=l.options,u=l.inputPlaceholder,c=l.placeholderText,d=l.value,m=l.onChange;l.inputStyle;var p=l.isObject,f=i(n(!1),2),g=f[0],b=f[1],h=i(n(d),2),v=h[0],y=h[1],x=i(n(s),2),E=x[0],w=x[1],k=i(n(""),2),A=k[0],S=k[1];t((function(){d&&y(d)}),[d]);var N,C=r();t((function(){function e(e){N.current&&!N.current.contains(e.target)&&b(!1)}return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[N=C]);var L=function(e){e.preventDefault(),e.target.classList.contains("fa-times")||(S(""),s&&w(s),b(1))};return e.createElement("div",{className:"rrms",ref:C},e.createElement("div",{className:"rrms-field"},e.createElement("div",{className:"rrms-value",onClick:L},v.length?e.createElement(e.Fragment,null,v.map((function(n){return e.createElement("span",{key:p?n[p[0]]:n},p?n[p[1]]:n)}))):e.createElement(e.Fragment,null,c||"Select...")),e.createElement("div",{className:"rrms-icons",onClick:v.length?function(){y([]),m&&m([])}:L},v.length?e.createElement("span",null,"✕"):e.createElement("span",null,e.createElement("i",{className:"rrms-caret"})))),g&&e.createElement("div",{className:"rrms-input"},e.createElement("input",{type:"text",value:A,onChange:function(e){var n=e.target.value;S(n);var t=s.filter((function(e){return(p?e[p[1]]:e).toLowerCase().includes(n.toLowerCase())}));w(t)},autoComplete:"off",placeholder:u||"Type to search...",autoFocus:!0}),e.createElement("ul",{className:"rrms-list"},E.length?E.map((function(n){var t=p?n[p[0]]:n,r=p?n[p[1]]:n;return e.createElement("li",{key:t,onClick:function(e){return function(e,n){"LI"===e.target.nodeName?e.target.classList.toggle("a"):e.target.parentElement.classList.toggle("a");var t=a.find(v,(function(e){return e===n}))?a.remove(v,(function(e){return e!==n})):[].concat(o(v),[n]);y(t),m&&m(t)}(e,n)},className:a.find(v,(function(e){return e===n}))?"a":""},e.createElement("div",null,r))})):e.createElement("li",null,"No result!"))))};export{d as default};
